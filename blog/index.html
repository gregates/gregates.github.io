<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>Blog | gregat.es</title>
    <meta content='width=device-width' name='viewport'>
    <link href='/css/screen.css' media='screen, projection' rel='stylesheet' type='text/css'>
    <link href='//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <nav role='banner'>
  <div class='navbar-header'>
    <button class='navbar-toggle toggle' type='button'>
      <span class='icon-bar'></span>
      <span class='icon-bar'></span>
      <span class='icon-bar'></span>
    </button>
    <a class='home' href='/'>gregat.es</a>
  </div>
  <div class='nav hide' role='navigation'>
    <ul>
      <li id='nav-blog'>
        <a href='/blog'>Blog</a>
      </li>
      <li class='dropdown' id='nav-contact'>
        <a class='toggle' href='#'>
          Contact
          <b class='caret'></b>
        </a>
        <ul class='dropdown-menu hide'>
          <li>
            <a href='https://github.com/gregates' target='_blank'>
              <span class='fa fa-github-square'></span>
              github
            </a>
          </li>
          <li>
            <a href='https://twitter.com/gregates' target='_blank'>
              <span class='fa fa-twitter-square'></span>
              twitter
            </a>
          </li>
          <li>
            <a href='http://stackoverflow.com/users/1619796/gregates' target='_blank'>
              <span class='fa fa-stack-overflow'></span>
              stackoverflow
            </a>
          </li>
          <li>
            <a href='http://www.linkedin.com/pub/greg-gates/20/824/874/' target='_blank'>
              <span class='fa fa-linkedin-square'></span>
              linkedin
            </a>
          </li>
          <li>
            <a href='mailto:greg@webkite.com'>
              <span class='fa fa-envelope'></span>
              email
            </a>
          </li>
        </ul>
      </li>
      <li id='nav-cv'>
        <a href='/cv'>CV</a>
      </li>
    </ul>
  </div>
</nav>

    <div id='content'>
      <sidebar>
        <img height='718px' src='/images/sidepic-min.png'>
      </sidebar>
      <main>
        
<article id="active-support-safe-buffer-4">
  <h3> Understanding ActiveSupport::SafeBuffer (part four) </h3>
  <h4 class="subtitle"> Metaphysics! </h4>
  <p class="meta">06 Feb 2014</p>

  <div class="post">
    <p>In <a href="/blog/active-support-safe-buffer-1/">Part One</a> of this series, I introduced a puzzle that can be
seen in the following code snippet:</p>

<div class="highlight"><pre><code class="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">p353</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="n">string_one</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span> <span class="o">+</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">html_safe</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;aa&quot;</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">p353</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="n">string_two</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">html_safe</span> <span class="o">+</span> <span class="s1">&#39;a&#39;</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;aa&quot;</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">p353</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="n">string_one</span> <span class="o">==</span> <span class="n">string_two</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">p353</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">string_one</span><span class="o">.</span><span class="n">html_safe?</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="o">-</span><span class="n">p353</span> <span class="p">:</span><span class="mo">005</span> <span class="o">&gt;</span> <span class="n">string_two</span><span class="o">.</span><span class="n">html_safe?</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
</code></pre></div>

<p>After learning <em>why</em> <code>string_two</code> is html safe and <code>string_one</code> is not in
<a href="/blog/active-support-safe-buffer-3/">Part Three</a>, this series of expressions might no longer seem
puzzling. In this post,
I want to offer an explanation of why these ruby expressions were jointly
puzzling in the first place. The answer will take us away from code and into
the realm of philosophical logic.</p>

    
    <a href="/blog/active-support-safe-buffer-4"> read more</a> &raquo;
    
  </div>
</article>

<article id="active-support-safe-buffer-3">
  <h3> Understanding ActiveSupport::SafeBuffer (part three) </h3>
  <h4 class="subtitle"> Inheritance and Method Lookup (i.e., the Answer) </h4>
  <p class="meta">24 Nov 2013</p>

  <div class="post">
    <p>In <a href="/blog/active-support-safe-buffer-2/">Part Two</a>, we discovered that the <code>String#html_safe</code> method
does return a <code>String</code> object, but a special kind of string &mdash; an
<code>ActiveSupport::SafeBuffer</code>.</p>

<div class="highlight"><pre><code class="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">p247</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">html_safe</span><span class="o">.</span><span class="n">is_a?</span> <span class="nb">String</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">p247</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">html_safe</span><span class="o">.</span><span class="n">class</span>
 <span class="o">=&gt;</span> <span class="no">ActiveSupport</span><span class="err">â€‹</span><span class="o">::</span><span class="no">SafeBuffer</span>
</code></pre></div>

<p>That&#39;s not yet an answer to our puzzle from <a href="/blog/active-support-safe-buffer-1/">Part One</a>, but it is the
key piece of information we need to reason our way through the puzzle, if we
understand class inheritance and method lookup in ruby.</p>

    
    <a href="/blog/active-support-safe-buffer-3"> read more</a> &raquo;
    
  </div>
</article>

<article id="active-support-safe-buffer-2">
  <h3> Understanding ActiveSupport::SafeBuffer (part two) </h3>
  <h4 class="subtitle"> Finding the Right Docs </h4>
  <p class="meta">19 Nov 2013</p>

  <div class="post">
    <p>In <a href="/blog/active-support-safe-buffer-1/">Part One</a>, I presented a puzzle about the Rails method
<code>#html_safe</code>. It&#39;s possible to concatenate two identical strings, after sending
<code>#html_safe</code> to one of them, where the result&#39;s
<code>#html_safe?</code> property depends on the <em>order</em> of concatenation, even though the results
<em>appear</em> to be identical strings (i.e., <code>string_one == string_two</code> returns <code>true</code>).
In <a href="/blog/active-support-safe-buffer-3/">Part Three</a>, we&#39;ll reason through the explanation for this surprising fact. This post is about finding the solution to this puzzle without the benefit of <a href="/blog/active-support-safe-buffer-3/">Part Three</a>. For a novice
programmer like myself-a-year-ago, developing this skill is much more valuable
than knowing the answer to any single question about ruby or rails. Teach a
person to fish, and all that.</p>

    
    <a href="/blog/active-support-safe-buffer-2"> read more</a> &raquo;
    
  </div>
</article>

<article id="active-support-safe-buffer-1">
  <h3> Understanding ActiveSupport::SafeBuffer (part one) </h3>
  <h4 class="subtitle"> A Puzzle </h4>
  <p class="meta">12 Nov 2013</p>

  <div class="post">
    <p>Recently, one of my coworkers (an ex-academic-turned-developer like myself)
raised the following ruby puzzle in our group chat.</p>

<div class="highlight"><pre><code class="ruby"><span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">p247</span> <span class="p">:</span><span class="mo">001</span> <span class="o">&gt;</span> <span class="n">string_one</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">html_safe</span> <span class="o">+</span> <span class="s1">&#39;a&#39;</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;aa&quot;</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">p247</span> <span class="p">:</span><span class="mo">002</span> <span class="o">&gt;</span> <span class="n">string_two</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span> <span class="o">+</span> <span class="s1">&#39;a&#39;</span><span class="o">.</span><span class="n">html_safe</span>
 <span class="o">=&gt;</span> <span class="s2">&quot;aa&quot;</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">p247</span> <span class="p">:</span><span class="mo">003</span> <span class="o">&gt;</span> <span class="n">string_one</span><span class="o">.</span><span class="n">html_safe?</span>
 <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="mi">2</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="mi">0</span><span class="n">p247</span> <span class="p">:</span><span class="mo">004</span> <span class="o">&gt;</span> <span class="n">string_two</span><span class="o">.</span><span class="n">html_safe?</span>
 <span class="o">=&gt;</span> <span class="kp">false</span>
</code></pre></div>

<p>To an experienced ruby/rails developer, there might not even be a <em>prima facie</em>
mystery here. If you&#39;re one of those, this series of posts probably isn&#39;t for you. To anyone else, at first glance this can easily appear odd.</p>

    
    <a href="/blog/active-support-safe-buffer-1"> read more</a> &raquo;
    
  </div>
</article>



      </main>
    </div>
  </body>
  <script src='/js/gregat.es.js'></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-45778206-1', 'gregat.es');
    ga('send', 'pageview');
  </script>
</html>
